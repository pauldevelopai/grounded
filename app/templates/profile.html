{% extends "base.html" %}

{% block title %}Profile - The AI Editorial Toolkit{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-0">

    <h2 class="text-2xl font-bold text-gray-900 mb-6">Your Profile</h2>

    {% if success %}
    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
        <p class="text-green-800 text-sm font-medium">Profile updated successfully.</p>
    </div>
    {% endif %}

    <form method="POST" action="/profile/update" class="bg-white rounded-lg shadow p-8 space-y-6">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

        <!-- Display Name -->
        <div>
            <label for="display_name" class="block text-sm font-medium text-gray-700 mb-2">
                Display Name
            </label>
            <input
                type="text"
                id="display_name"
                name="display_name"
                value="{{ user.display_name or '' }}"
                placeholder="How you'd like to be called"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
        </div>

        <!-- Organisation -->
        <div>
            <label for="organisation" class="block text-sm font-medium text-gray-700 mb-2">
                Organisation
            </label>
            <input
                type="text"
                id="organisation"
                name="organisation"
                value="{{ user.organisation or '' }}"
                placeholder="e.g., BBC, Reuters, Freelance"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
        </div>

        <!-- Organisation Type -->
        <div>
            <label for="organisation_type" class="block text-sm font-medium text-gray-700 mb-2">
                Organisation Type
            </label>
            <select
                id="organisation_type"
                name="organisation_type"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
                <option value="">Select type...</option>
                <option value="newsroom" {{ 'selected' if user.organisation_type == 'newsroom' else '' }}>Newsroom</option>
                <option value="freelance" {{ 'selected' if user.organisation_type == 'freelance' else '' }}>Freelance</option>
                <option value="ngo" {{ 'selected' if user.organisation_type == 'ngo' else '' }}>NGO</option>
                <option value="academic" {{ 'selected' if user.organisation_type == 'academic' else '' }}>Academic</option>
                <option value="other" {{ 'selected' if user.organisation_type == 'other' else '' }}>Other</option>
            </select>
        </div>

        <!-- Role -->
        <div>
            <label for="role" class="block text-sm font-medium text-gray-700 mb-2">
                Role
            </label>
            <input
                type="text"
                id="role"
                name="role"
                value="{{ user.role or '' }}"
                placeholder="e.g., Reporter, Editor, Data Journalist"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
        </div>

        <!-- Country -->
        <div>
            <label for="country" class="block text-sm font-medium text-gray-700 mb-2">
                Country
            </label>
            <input
                type="text"
                id="country"
                name="country"
                value="{{ user.country or '' }}"
                placeholder="e.g., United Kingdom, Kenya, Brazil"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
        </div>

        <!-- Interests -->
        <div>
            <label for="interests" class="block text-sm font-medium text-gray-700 mb-2">
                Interests & Focus Areas
            </label>
            <textarea
                id="interests"
                name="interests"
                rows="3"
                placeholder="e.g., investigative journalism, data analysis, fact-checking, AI ethics"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >{{ user.interests or '' }}</textarea>
        </div>

        <!-- AI Experience Level -->
        <div>
            <label for="ai_experience_level" class="block text-sm font-medium text-gray-700 mb-2">
                AI Experience Level
            </label>
            <select
                id="ai_experience_level"
                name="ai_experience_level"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
                <option value="">Select level...</option>
                <option value="beginner" {{ 'selected' if user.ai_experience_level == 'beginner' else '' }}>Beginner - New to AI tools</option>
                <option value="intermediate" {{ 'selected' if user.ai_experience_level == 'intermediate' else '' }}>Intermediate - Some experience</option>
                <option value="advanced" {{ 'selected' if user.ai_experience_level == 'advanced' else '' }}>Advanced - Regular AI user</option>
            </select>
        </div>

        <!-- Submit -->
        <div class="pt-4 border-t">
            <button
                type="submit"
                class="w-full bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium"
            >
                Save Profile
            </button>
        </div>
    </form>

    <!-- Account Info -->
    <div class="bg-white rounded-lg shadow p-6 mt-6">
        <h3 class="text-sm font-medium text-gray-700 mb-3">Account Information</h3>
        <div class="text-sm text-gray-600 space-y-1">
            <p><span class="font-medium">Email:</span> {{ user.email }}</p>
            <p><span class="font-medium">Username:</span> {{ user.username }}</p>
            <p><span class="font-medium">Joined:</span> {{ user.created_at.strftime('%Y-%m-%d') }}</p>
        </div>
    </div>

</div>
{% endblock %}
